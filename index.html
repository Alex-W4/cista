<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Cista++ is an open source, single file C++17 serialization library.">
  <meta name="keywords" content="cista, serialization, C++, C++17, cpp, single header, marshalling">
  <meta name="author" content="Felix Gündling">

  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
  <link rel="icon" href="favicon.ico" type="image/x-icon">

  <title>Cista++ | Homepage</title>

  <link href="bootstrap.min.css" rel="stylesheet">
  <link href="darcula.css" rel="stylesheet">
  <script src="highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

  <style>
    /*
     * Globals
     */

    /* Links */
    a,
    a:focus,
    a:hover {
      color: #ffe953;
    }

    /* Custom default button */
    .btn-secondary,
    .btn-secondary:hover,
    .btn-secondary:focus {
      color: #333;
      text-shadow: none;
      /* Prevent inheritance from `body` */
      background-color: #fff;
      border: .05rem solid #fff;
    }

    .btn {
      text-shadow: none;
    }

    .btn-primary {
      color: #111;
      background-color: #ffe953;
      border-color: #ffe953;
    }

    .btn-primary:hover {
      color: #111;
      background-color: #ffe220;
      border-color: #ffe220;
    }

    .badge-run {
      color: #212529;
      background-color: #ffe953;
      border-color: #ffc107;
    }

    .badge-run:hover {
      color: #212529;
      background-color: #d39e00;
      border-color: #212529;
      text-decoration: none;
    }

    .lead {
      margin: 2em 0;
    }

    .lead>li::before {
      content: "» ";
      font-weight: bold;
      margin-right: 8px;
      color: #ffe953;
    }

    .lead>li {
      list-style-type: none;
      margin-top: .4em;
    }

    /*
     * Base structure
     */

    body {
      height: 100%;
      background-color: transparent;
      display: -ms-flexbox;
      display: -webkit-box;
      display: flex;
    }


    /*
     * Header
     */
    .masthead {
      margin-bottom: 2rem;
      color: #fff;
    }

    .masthead-brand {
      margin-bottom: 0;
    }

    .nav-masthead .nav-link,
    .nav-masthead .nav-icon {
      padding: .25rem 0;
      font-weight: 700;
      color: rgba(255, 255, 255, .5);
      background-color: transparent;
      border-bottom: .25rem solid transparent;
    }

    .nav-masthead .nav-link:hover,
    .nav-masthead .nav-link:focus {
      border-bottom-color: rgba(255, 255, 255, .25);
    }

    .nav-masthead .nav-link+.nav-link {
      margin-left: 1rem;
    }

    .nav-masthead .nav-link+.nav-icon {
      margin-left: 2rem;
    }

    .nav-masthead .active {
      color: #fff;
      border-bottom-color: #fff;
    }

    .nav-icon,
    .nav-icon:hover {
      border: none !important;
    }

    @media (min-width: 48em) {
      .masthead-brand {
        float: left;
      }

      .nav-masthead {
        float: right;
      }

      html {
        height: 100%;
      }
    }


    /*
     * Cover
     */
    .cover {
      padding: 0 1rem;
      margin-top: auto;
      margin-bottom: auto;
    }

    .cover .btn-lg {
      padding: .75rem 1.25rem;
      font-weight: 700;
    }

    .message {
      color: #fff;
      text-shadow: 0 .05rem .1rem rgba(0, 0, 0, .5);
    }

    .message .badge {
      text-shadow: none;
    }

    .try {
      float: right;
      position: absolute;
      right: 15px;
      top: 12px;
    }

    .code {
      position: relative;
    }

    .lead>li+li {
      padding-top: 0.4em;
    }

    /*
     * Footer
     */
    .mastfoot {
      color: rgba(255, 255, 255, .5);
    }

    html {
      background-color: #1e202a;
    }

    @media (min-width: 1200px) {
      .container {
        max-width: 1160px;
      }
    }

    @media (min-width: 1400px) {
      .container {
        max-width: 1300px;
      }
    }

    .masthead-brand a:hover {
      text-decoration: none;
    }

    @media (max-width: 800px) {
      .buttons {
        margin-bottom: 2em;
      }
    }

    .card {
      background-color: #2b2e3b;
      color: white;
    }

    .table-striped tbody tr:nth-of-type(2n+1) {
      background-color: rgba(0, 0, 0, 0.33);
    }
  </style>
</head>

<body>
  <!-- ****  HOME **** -->
  <div class="container d-flex h-100 p-3 mx-auto flex-column">
    <header class="masthead mt-3">
      <div class="inner">
        <h3 class="masthead-brand text-center text-md-left mb-3">
          <a href="#main" style="color:white">
            <img style="position: relative; top: -3px" class="mr-3" src="logo.svg" alt="" width="64" height="64" />
            Cista++
          </a>
        </h3>
        <nav class="nav nav-masthead justify-content-center">
          <a class="nav-link active" href="#main">Home</a>
          <a class="nav-link" href="#serialization">Serialization</a>
          <a class="nav-link" href="#reflection">Reflection</a>
          <a class="nav-icon" href="https://github.com/felixguendling/cista">
            <img style="position: relative; top: -3px" class="mr-3" src="github.svg" alt="" width="32" height="32" />
          </a>
        </nav>
      </div>
    </header>

    <main id="main" role="main" class="inner cover mb-5">
      <div class="row message">
        <div class="col">
          <h1 style="font-size: 2.35em; color: #ffe953">C++ Serialization &amp; Reflection</h1>
          <p class="lead">
            Cista++ is a simple, open source (MIT license) <span style="white-space: nowrap;">C++17 compatible</span>
            way of
            (de-)serializing C++ data structures.<br />
            <b><i>Single header. No macros. No source code generation.</i></b>
          </p>
          <ul class="lead">
            <li>Raw performance - use your native structs.<br />Supports modification/resizing of deserialized data!
            </li>
            <li>Supports complex and cyclic data structures including cyclic references, recursive data structures, etc.
            </li>
            <li>Save 50% memory: serialize directly to the filesystem if needed, no intermediate buffer required.</li>
            <li>Fuzzing-checked though continuous fuzzing using LLVMs LibFuzzer.</li>
            <li>Comes with a serializable high-performance hash map and hash set implementation based on Google's Swiss
              Table technique.</li>
            <li>Reduce boilerplate code: automatic derivation of hash and equality functions.</li>
            <li>Optional: built-in automatic data structure versioning through recursive type hashing.</li>
            <li>Optional: check sum to prevent deserialization of corrupt data.</li>
            <li><b>Compatible with Clang, GCC, and MSVC</b></li>
          </ul>
          <div class="buttons text-center mt-4">
            <a href="https://github.com/felixguendling/cista/releases/download/v0.7/cista.h"
              style="margin-left: auto; margin-right: auto" class="btn btn-lg btn-primary mr-3">Download</a>
            <a href="https://github.com/felixguendling/cista/wiki" style="margin-left: auto; margin-right: auto"
              class="btn btn-lg btn-secondary">Documentation</a>
          </div>
        </div>

        <div class="col col-md-auto pt-3">
          <div class="code">
            <a href="https://wandbox.org/permlink/4ufQwu5LuWZVKMwx" class="try badge badge-run" target="_blank">compile
              & run</a>
            <pre><code class="cpp box-shadow rounded p-4">namespace data = cista::raw;
struct my_struct {  // Define your struct.
  int a_{0};
  struct inner {
      data::string b_;
  } j;
};

std::vector&lt;unsigned char&gt; buf;
{  // Serialize.
  my_struct obj{1, {data::string{"test"}}};
  buf = cista::serialize(obj);
}

// Deserialize.
auto deserialized = cista::deserialize&lt;my_struct&gt;(buf);
assert(deserialized-&gt;j.b_ == data::string{"test"});</code></pre>
          </div>
          <div class="code">
            <a href="https://wandbox.org/permlink/iNgGkW2dfbNY2YV9" class="try badge badge-run" target="_blank">compile
              & run</a>
            <pre><code class="cpp box-shadow rounded p-4">namespace data = cista::offset;
constexpr auto const MODE =  // opt. versioning + check sum
    cista::mode::WITH_VERSION | cista::mode::WITH_INTEGRITY;

struct pos { int x, y; };
using pos_map =  // Automatic deduction of hash & equality
    data::hash_map&lt;data::vector&lt;pos&gt;,
                   data::hash_set&lt;data::string&gt;&gt;;

{  // Serialize.
  auto positions =
      pos_map{{{{1, 2}, {3, 4}}, {"hello", "cista"}},
              {{{5, 6}, {7, 8}}, {"hello", "world"}}};
  cista::buf mmap{cista::mmap{"data"}};
  cista::serialize&lt;MODE&gt;(mmap, positions);
}

// Deserialize.
auto b = cista::mmap("data", cista::mmap::protection::READ);
auto positions = cista::deserialize&lt;pos_map, MODE&gt;(b);</code></pre>
          </div>
        </div>
      </div>
    </main> <!-- MAIN END -->

    <!-- ****  ABOUT **** -->
    <main id="serialization" role="main" class="inner">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Use Cases</h5>
          <p class="card-text">
            <p>Reader and writer should run on the same architecture (e.g. 64 bit little endian). Examples:</p>
            <ul>
              <li>Asset loading for all kinds of applications (i.e. game assets, GIS data, large graphs, etc.)</li>
              <li>Transferring data over network</li>
              <li>Shared memory applications</li>
            </ul>
            <p>
              Currently, only C++17 software can read/write data.
              It is possible to generate accessors for other programming languages, too.
            </p>
          </p>
        </div>
      </div>

      <div class="card mt-3">
        <div class="card-body">
          <h5 class="card-title">Benchmarks</h5>
          <p class="card-text">
            <p>Have a look at the <a href="https://github.com/felixguendling/cpp-serialization-benchmark">benchmark
                repository</a> for more details.</p>
            <table class="table table-striped">
              <thead>
                <tr>
                  <th scope="col" align="left">Library</th>
                  <th scope="col" align="right">Serialize</th>
                  <th scope="col" align="right">Deserialize</th>
                  <th scope="col" align="right">Fast Deserialize</th>
                  <th scope="col" align="right">Traverse</th>
                  <th scope="col" align="right">Deserialize &amp; Traverse</th>
                  <th scope="col" align="right">Size</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td align="left"><a href="https://capnproto.org/capnp-tool.html" rel="nofollow">Cap’n Proto</a></td>
                  <td align="right">105 ms</td>
                  <td align="right"><strong>0.002 ms</strong></td>
                  <td align="right"><strong>0.0 ms</strong></td>
                  <td align="right">356 ms</td>
                  <td align="right">353 ms</td>
                  <td align="right">50.5M</td>
                </tr>
                <tr>
                  <td align="left"><a href="https://uscilab.github.io/cereal/index.html" rel="nofollow">cereal</a></td>
                  <td align="right">239 ms</td>
                  <td align="right">197.000 ms</td>
                  <td align="right">-</td>
                  <td align="right">125 ms</td>
                  <td align="right">322 ms</td>
                  <td align="right">37.8M</td>
                </tr>
                <tr>
                  <td align="left"><a href="https://cista.rocks/" rel="nofollow">Cista++</a> <code>offset</code></td>
                  <td align="right"><strong>72 ms</strong></td>
                  <td align="right">0.053 ms</td>
                  <td align="right"><strong>0.0 ms</strong></td>
                  <td align="right">132 ms</td>
                  <td align="right"><strong>132 ms</strong></td>
                  <td align="right"><strong>25.3M</strong></td>
                </tr>
                <tr>
                  <td align="left"><a href="https://cista.rocks/" rel="nofollow">Cista++</a> <code>raw</code></td>
                  <td align="right">3555 ms</td>
                  <td align="right">68.900 ms</td>
                  <td align="right">21.5 ms</td>
                  <td align="right"><strong>112 ms</strong></td>
                  <td align="right"><strong>133 ms</strong></td>
                  <td align="right">176.4M</td>
                </tr>
                <tr>
                  <td align="left"><a href="https://google.github.io/flatbuffers/" rel="nofollow">Flatbuffers</a></td>
                  <td align="right">2349 ms</td>
                  <td align="right">15.400 ms</td>
                  <td align="right"><strong>0.0 ms</strong></td>
                  <td align="right">136 ms</td>
                  <td align="right"><strong>133 ms</strong></td>
                  <td align="right">378.0M</td>
                </tr>
              </tbody>
            </table>
          </p>
        </div>
      </div>

      <div class="card mt-3">
        <div class="card-body">
          <h5 class="card-title">Alternatives</h5>
          <p class="card-text">
            <p>
              If you need to be compatible with other programming languages
              or require protocol evolution (downward compatibility)
              you should look for another solution.
              The following libraries provide some/all of those features.
            </p>
            <p>Alternative libraries:</p>
            <ul class="mt-2">
              <li><a href="https://developers.google.com/protocol-buffers/">Protocol Buffers</a></li>
              <li><a href="https://capnproto.org/">Cap’n Proto</a></li>
              <li><a href="https://google.github.io/flatbuffers/">Flatbuffers</a></li>
              <li><a href="https://uscilab.github.io/cereal/">cereal</a></li>
              <li><a href="https://www.boost.org/doc/libs/1_68_0/libs/serialization/doc/index.html">Boost
                  Serialization</a></li>
              <li><a href="https://msgpack.org/">MessagePack</a></li>
              <li><a href="https://en.wikipedia.org/wiki/Comparison_of_data_serialization_formats">... many more</a>
              </li>
            </ul>
          </p>
        </div>
      </div>
    </main> <!-- ABOUT END -->

    <!-- ****  Reflection **** -->
    <main id="reflection" role="main" class="inner">
      <div class="card-columns">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Human Readable to String</h5>
            <p class="card-text">
              <div class="code">
                <a href="https://onlinegdb.com/SyE6anqkV" class="try badge badge-run" target="_blank">compile & run</a>
                <pre class="box-shadow rounded p-2"><code class="language-cpp">struct a {
  CISTA_PRINTABLE(a)
  int i_ = 1;
  int j_ = 2;
  double d_ = 100.0;
  std::string s_ = "hello";
};

int main() {
  a instance;
  std::cout &lt;&lt; instance;
  // "{1, 2, 100, hello}"
}</code></pre>
              </div>
            </p>
          </div>
        </div>
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Modify Struct as Tuple</h5>
            <p class="card-text">
              <div class="code">
                <a href="https://onlinegdb.com/SJKvTh5yE" class="try badge badge-run" target="_blank">compile & run</a>
                <pre class="box-shadow rounded p-2"><code class="language-cpp">struct a {
  int i_ = 1;
  int j_ = 2;
  double d_ = 100.0;
  std::string s_ = "hello";
};

int main() {
  using cista::to_tuple;
  using std::get;
  a i;
  get<0>(to_tuple(i)) = 5;
  get<1>(to_tuple(i)) = 7;
  get<2>(to_tuple(i)) = 2.0;
  get<3>(to_tuple(i)) = "yeah";
}</code></pre>
              </div>
            </p>
          </div>
        </div>
        <div class="card text-white text-right p-3" style="background-color: #272822">
          <blockquote class="blockquote mb-0">
            <p>
              The Cista++ Serialization is based on
              a powerful reflection concept made possible
              by the C++17 structured bindings feature.
            </p>
            <p>
              This page presents some other
              utilities enabled by this technique.
            </p>
            <footer class="blockquote-footer">
              <small class="text-muted">
                <i>Credits:</i> based on the idea presented <a
                  href="http://playfulprogramming.blogspot.com/2016/12/serializing-structs-with-c17-structured.html">here</a>.
              </small>
            </footer>
          </blockquote>
        </div>
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Comparable: Generate Operators</h5>
            <p class="card-text">
              <div class="code">
                <a href="https://onlinegdb.com/rk0fTh5kN" class="try badge badge-run" target="_blank">compile & run</a>
                <pre class="box-shadow rounded p-2"><code class="language-cpp">struct a {
  CISTA_COMPARABLE()
  int i_ = 1;
  int j_ = 2;
  double d_ = 100.0;
  std::string s_ = "hello";
};

int main() {
  a inst1, inst2;

  CHECK(inst1 == inst2);

  inst1.j_ = 1;

  CHECK(!(inst1 == inst2));
  CHECK(inst1 != inst2);
  CHECK(inst1 &lt;= inst2);
}</code></pre>
              </div>
            </p>
          </div>
        </div>
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Iterate Each Field</h5>
            <p class="card-text">
              <div class="code">
                <a href="https://onlinegdb.com/ryRp33qkV" class="try badge badge-run" target="_blank">compile & run</a>
                <pre class="box-shadow rounded p-2"><code class="language-cpp">struct a {
  int i_ = 1;
  int j_ = 2;
  double d_ = 100.0;
  std::string s_ = "hello";
};

int main() {
  a i;
  cista::for_each_field(
    i, [](auto&& m) { m = {}; });
  CHECK(i.i_ == 0);
  CHECK(i.j_ == 0);
  CHECK(i.d_ == 0.0);
  CHECK(i.s_ == "");
}</code></pre>
              </div>
            </p>
          </div>
        </div>
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Generate SQL Statements</h5>
            <p class="card-text">
              <div class="code">
                <a href="https://onlinegdb.com/BkEgNzpkN" class="try badge badge-run" target="_blank">compile & run</a>
                <pre class="box-shadow rounded p-2"><code class="language-cpp">struct row {
  sql_col&lt;
    int, name("id"),
    primary, not_null&gt; user_id;
  sql_col&lt;
    std::string, name("first"),
    not_null&gt; first_name;
  sql_col&lt;
    std::string, name("last"),
    not_null&gt; last_name;
} r;

int main() {
  std::cout &lt;&lt;
      create_table_statement(r);
  // CREATE TABLE (
  //   id INT PRIMARY NOT NULL,
  //   first TEXT NOT NULL,
  //   last TEXT NOT NULL
  // );
}</code></pre>
              </div>
            </p>
          </div>
        </div>
      </div>
    </main>

    <footer class="mastfoot mt-auto">
      <div class="text-center">
        <div class="copyright p-2">
          ©2019-2021 made with
          <span style="font-family: Times, serif">&#10084;</span> by
          <a href="https://github.com/felixguendling" target="_blank">Felix Gündling</a>
        </div>
      </div>
    </footer>
  </div>


  <!-- Bootstrap core JavaScript
    ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script>window.jQuery || document.write('<script src="jquery-slim.min.js"><\/script>')</script>
  <script src="prism.js"></script>
  <script>
    function nav(route) {
      var title = 'Cista++';
      var separator = ' | ';
      var route_names = { main: 'Homepage', serialization: 'Serialization', reflection: 'Reflection' };
      var routes = ['main', 'serialization', 'reflection'];
      var path = (route || window.location.hash).slice(1).split('-');

      var route = path[0] || 'main';
      document.title = title + ' ' + separator + ' ' + route_names[route];

      // content
      for (var r in routes) {
        document.getElementById(routes[r]).style.display = 'none';
      }
      document.getElementById(route).style.display = '';

      // link style
      $('.nav-link').each(function (i, el) {
        var href = el.href.slice(el.href.indexOf('#') + 1);
        el.className = href === route ? 'active nav-link' : 'nav-link';
      });
    }

    $(document).on('click', 'a[href^=\\#]', function (event) {
      event.preventDefault();
      history.pushState({}, "", this.href);
      nav();
    });

    window.addEventListener("hashchange", function () { nav(); }, false);

    nav();
  </script>
</body>

</html>
